(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):"function"===typeof define&&define.amd?define(["CoreHome",,"CorePluginsAdmin"],t):"object"===typeof exports?exports["GoogleAnalyticsImporter"]=t(require("CoreHome"),require("vue"),require("CorePluginsAdmin")):e["GoogleAnalyticsImporter"]=t(e["CoreHome"],e["Vue"],e["CorePluginsAdmin"])})("undefined"!==typeof self?self:this,(function(e,t,n){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="plugins/GoogleAnalyticsImporter/vue/dist/",n(n.s="fae3")}({"19dc":function(t,n){t.exports=e},"8bbf":function(e,n){e.exports=t},a5a2:function(e,t){e.exports=n},fae3:function(e,t,n){"use strict";if(n.r(t),n.d(t,"ImportSchedulerGA4",(function(){return I})),n.d(t,"ImportStatus",(function(){return ve})),n.d(t,"ConfigureConnection",(function(){return ut})),n.d(t,"ClientConfig",(function(){return It})),n.d(t,"AdminPage",(function(){return Bt})),n.d(t,"Connect",(function(){return vt})),"undefined"!==typeof window){var o=window.document.currentScript,r=o&&o.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(n.p=r[1])}var a=n("19dc"),l=["Transitions.getTransitions","UsersFlow.getUsersFlow","UsersFlow.getUsersFlowPretty","UsersFlow.getInteractionActions"],i=window,c=i.$;a["Matomo"].on("widget:loaded",(function(e){var t=e.parameters,n=e.element,o="".concat(t.module,".").concat(t.action);if(-1!==l.indexOf(o)){var r=a["Matomo"].importedFromGoogleStartDate,i=a["Matomo"].importedFromGoogleEndDate;if(r&&i){r=Object(a["parseDate"])(r),i=Object(a["parseDate"])(i);var s=a["MatomoUrl"].parsed.value.period,m=a["MatomoUrl"].parsed.value.date,u=a["Periods"].parse(s,m).getDateRange(),d=!(r.getTime()>u[1].getTime()||i.getTime()<u[0].getTime());if(d){var p=Object(a["translate"])("GoogleAnalyticsImporter_LogDataRequiredForReport"),b='<br/> <div class="alert alert-info">'.concat(p,"</div>");c(n).find(".card-content>div").append(b)}}}}));var s=n("8bbf"),m={name:"startDateGA4"},u={name:"endDateGA4"},d={name:"propertyIdGA4"},p={name:"streamIds"},b={name:"isMobileAppGA4"},g={name:"timezoneGA4"},O={name:"extraCustomDimensionsGA4"},j={name:"forceIgnoreOutOfCustomDimSlotErrorGA4"},f={name:"isVerboseLoggingEnabledGA4"},y=["disabled"];function h(e,t,n,o,r,a){var l=Object(s["resolveComponent"])("Field");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ScheduleImportDescription")),1),Object(s["createElementVNode"])("div",m,[Object(s["createVNode"])(l,{uicontrol:"text",name:"startDateGA4",modelValue:e.startDateGA4,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.startDateGA4=t}),title:e.translate("GoogleAnalyticsImporter_StartDate"),placeholder:"".concat(e.translate("GoogleAnalyticsImporter_CreationDate")," (YYYY-MM-DD)"),"inline-help":e.translate("GoogleAnalyticsImporter_StartDateHelp")},null,8,["modelValue","title","placeholder","inline-help"])]),Object(s["createElementVNode"])("div",u,[Object(s["createVNode"])(l,{uicontrol:"text",name:"endDateGA4",modelValue:e.endDateGA4,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.endDateGA4=t}),title:e.translate("GoogleAnalyticsImporter_EndDate"),placeholder:e.translate("GoogleAnalyticsImporter_None"),"inline-help":e.endDateHelp},null,8,["modelValue","title","placeholder","inline-help"])]),Object(s["createElementVNode"])("div",d,[Object(s["createVNode"])(l,{uicontrol:"text",name:"propertyIdGA4",modelValue:e.propertyIdGA4,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.propertyIdGA4=t}),placeholder:"eg. properties/{PROPERTY_ID}",title:e.translate("GoogleAnalyticsImporter_PropertyIdGA4"),"inline-help":e.translate("GoogleAnalyticsImporter_PropertyIdGA4Help")},null,8,["modelValue","title","inline-help"])]),Object(s["createElementVNode"])("div",p,[Object(s["createVNode"])(l,{uicontrol:"multituple",name:"streamIds",modelValue:e.streamIds,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.streamIds=t}),title:e.translate("GoogleAnalyticsImporter_StreamIdFilter"),"inline-help":e.streamIdsFilterHelp,"ui-control-attributes":e.streamIdsField},null,8,["modelValue","title","inline-help","ui-control-attributes"])]),Object(s["createElementVNode"])("div",b,[Object(s["createVNode"])(l,{uicontrol:"checkbox",name:"isMobileAppGA4",modelValue:e.isMobileAppGA4,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.isMobileAppGA4=t}),title:e.translate("GoogleAnalyticsImporter_IsMobileApp"),"inline-help":e.translate("GoogleAnalyticsImporter_IsMobileAppHelp")},null,8,["modelValue","title","inline-help"])]),Object(s["createElementVNode"])("div",g,[Object(s["createVNode"])(l,{uicontrol:"text",name:"timezoneGA4",modelValue:e.timezoneGA4,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.timezoneGA4=t}),title:e.translate("GoogleAnalyticsImporter_Timezone"),placeholder:e.translate("GoogleAnalyticsImporter_Optional"),"inline-help":e.timezoneHelp},null,8,["modelValue","title","placeholder","inline-help"])]),Object(s["createElementVNode"])("div",O,[Object(s["createVNode"])(l,{uicontrol:"multituple",name:"extraCustomDimensionsGA4",modelValue:e.extraCustomDimensionsGA4,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.extraCustomDimensionsGA4=t}),title:e.translate("GoogleAnalyticsImporter_ExtraCustomDimensions"),"inline-help":e.extraCustomDimensionsHelp,"ui-control-attributes":e.extraCustomDimensionsField},null,8,["modelValue","title","inline-help","ui-control-attributes"])]),Object(s["createElementVNode"])("div",j,[Object(s["createVNode"])(l,{uicontrol:"checkbox",name:"forceIgnoreOutOfCustomDimSlotErrorGA4",modelValue:e.ignoreCustomDimensionSlotCheckGA4,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.ignoreCustomDimensionSlotCheckGA4=t}),title:e.translate("GoogleAnalyticsImporter_ForceCustomDimensionSlotCheck"),"inline-help":e.forceIgnoreOutOfCustomDimSlotErrorHelp},null,8,["modelValue","title","inline-help"])]),Object(s["createElementVNode"])("h3",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Troubleshooting")),1),Object(s["createElementVNode"])("div",f,[Object(s["createVNode"])(l,{uicontrol:"checkbox",name:"isVerboseLoggingEnabledGA4",modelValue:e.isVerboseLoggingEnabledGA4,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.isVerboseLoggingEnabledGA4=t}),title:e.translate("GoogleAnalyticsImporter_IsVerboseLoggingEnabled"),"inline-help":e.isVerboseLoggingEnabledHelp},null,8,["modelValue","title","inline-help"])]),Object(s["createElementVNode"])("button",{type:"submit",id:"startImportSubmitGA4",class:"btn",onClick:t[9]||(t[9]=function(t){return e.startImportGA4()}),disabled:e.isStartingImport},Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Start")),9,y)])}var C=n("a5a2"),A=Object(s["defineComponent"])({props:{startImportNonce:{type:String,required:!0},maxEndDateDesc:String,extraCustomDimensionsField:{type:Object,required:!0},streamIdsField:{type:Object,required:!0}},components:{Field:C["Field"]},data:function(){return{isStartingImport:!1,extraCustomDimensionsGA4:[],streamIds:[],isVerboseLoggingEnabledGA4:!1,ignoreCustomDimensionSlotCheckGA4:!1,startDateGA4:"",endDateGA4:"",propertyIdGA4:"",accountId:"",viewId:"",isMobileAppGA4:!1,timezoneGA4:""}},created:function(){return this},methods:{startImportGA4:function(){if(this.startDateGA4)try{Object(a["parseDate"])(this.startDateGA4)}catch(n){var e=a["NotificationsStore"].show({message:Object(a["translate"])("GoogleAnalyticsImporter_InvalidDateFormat",["YYYY-MM-DD"]),context:"error",type:"transient"});return void a["NotificationsStore"].scrollToNotification(e)}this.isStartingImport=!0;var t=!this.ignoreCustomDimensionSlotCheckGA4;return a["AjaxHelper"].post({module:"GoogleAnalyticsImporter",action:"startImportGA4",startDate:this.startDateGA4,endDate:this.endDateGA4,propertyId:this.propertyIdGA4,viewId:this.viewId,nonce:this.startImportNonce,accountId:this.accountId,isMobileApp:this.isMobileAppGA4?"1":"0",timezone:this.timezoneGA4,extraCustomDimensions:this.extraCustomDimensionsGA4,streamIds:this.streamIds,isVerboseLoggingEnabled:this.isVerboseLoggingEnabledGA4?"1":"0",forceCustomDimensionSlotCheck:t?"1":"0"},{},{withTokenInUrl:!0}).finally((function(){window.location.reload()}))}},computed:{endDateHelp:function(){var e=Object(a["translate"])("GoogleAnalyticsImporter_EndDateHelpText"),t=this.maxEndDateDesc&&Object(a["translate"])("<br/><br/>GoogleAnalyticsImporter_MaxEndDateHelp",this.maxEndDateDesc);return"".concat(e," ").concat(t||"")},timezoneHelp:function(){var e="https://www.php.net/manual/en/timezones.php";return Object(a["translate"])("GoogleAnalyticsImporter_TimezoneGA4Help",'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">'),"</a>")},extraCustomDimensionsHelp:function(){var e="https://ga-dev-tools.web.app/ga4/dimensions-metrics-explorer/";return Object(a["translate"])("GoogleAnalyticsImporter_ExtraCustomDimensionsGA4Help",'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">'),"</a>")},streamIdsFilterHelp:function(){var e="https://matomo.org/faq/what-is-data-stream-in-google-analytics-4/";return Object(a["translate"])("GoogleAnalyticsImporter_StreamIdFilterHelpText",'<a href="'.concat(e,'" rel="noreferrer noopener" target="_blank">'),"</a>","<br><br><b>","</b>")},forceIgnoreOutOfCustomDimSlotErrorHelp:function(){return Object(a["translate"])("GoogleAnalyticsImporter_ForceCustomDimensionSlotCheckHelp",Object(a["externalLink"])("https://matomo.org/docs/custom-dimensions/"),"</a>")},isVerboseLoggingEnabledHelp:function(){return Object(a["translate"])("GoogleAnalyticsImporter_IsVerboseLoggingEnabledHelp","/path/to/matomo/tmp/logs/","gaimportlog.$idSite.$matomoDomain.log")}}});A.render=h;var I=A,D={ref:"root"},N={class:"entityTable importStatusesTable"},k={class:"modal",id:"openScheduleReimportModal"},E={class:"modal-content"},S={class:"modal-footer"},G={class:"modal",id:"editImportEndDate"},V={class:"modal-content"},_={class:"modal-footer"};function v(e,t,n,o,r,a){var l=Object(s["resolveComponent"])("ImportStatusRow"),i=Object(s["resolveComponent"])("Field"),c=Object(s["resolveDirective"])("tooltips");return Object(s["withDirectives"])((Object(s["openBlock"])(),Object(s["createElementBlock"])("div",D,[Object(s["createElementVNode"])("table",N,[Object(s["createElementVNode"])("thead",null,[Object(s["createElementVNode"])("tr",null,[Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_MatomoSite")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_GoogleAnalyticsInfo")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Status")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_LatestDayProcessed")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ScheduledReImports")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_StartFinishTimes")),1),Object(s["createElementVNode"])("th",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Actions")),1)])]),Object(s["createElementVNode"])("tbody",null,[(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.statuses,(function(t,n){return Object(s["openBlock"])(),Object(s["createBlock"])(l,{status:t,key:n,onEndImport:function(n){return e.showEditImportEndDateModal(t.idSite,t.isGA4)},onReimport:function(n){return e.openScheduleReimportModal(t.idSite,t.isGA4)},onDelete:function(n){return e.deleteImportStatus(t.idSite,n.isDone)},onManuallyResume:function(n){return e.manuallyResume(t.idSite,t.isGA4)}},null,8,["status","onEndImport","onReimport","onDelete","onManuallyResume"])})),128))])]),Object(s["createElementVNode"])("div",k,[Object(s["createElementVNode"])("div",E,[Object(s["createElementVNode"])("h3",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_EnterImportDateRange")),1),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(i,{name:"re-import-start-date",uicontrol:"text",modelValue:e.reimportStartDate,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.reimportStartDate=t}),placeholder:"".concat(e.translate("GoogleAnalyticsImporter_StartDate")," (YYYY-MM-DD)")},null,8,["modelValue","placeholder"])]),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(i,{name:"re-import-end-date",uicontrol:"text",modelValue:e.reimportEndDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.reimportEndDate=t}),placeholder:"".concat(e.translate("GoogleAnalyticsImporter_EndDate")," (YYYY-MM-DD)")},null,8,["modelValue","placeholder"])])]),Object(s["createElementVNode"])("div",S,[Object(s["createElementVNode"])("a",{id:"scheduleReimportSubmit",href:"",class:"modal-action modal-close btn",onClick:t[2]||(t[2]=Object(s["withModifiers"])((function(t){return e.scheduleReimport()}),["prevent"])),style:{"margin-right":"3.5px"}},Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Schedule")),1),Object(s["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[3]||(t[3]=Object(s["withModifiers"])((function(){}),["prevent"]))},Object(s["toDisplayString"])(e.translate("General_Cancel")),1)])]),Object(s["createElementVNode"])("div",G,[Object(s["createElementVNode"])("div",V,[Object(s["createElementVNode"])("h3",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_EnterImportEndDate")),1),Object(s["createElementVNode"])("p",null,[Object(s["createElementVNode"])("em",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_LeaveEmptyToRemove")),1)]),Object(s["createElementVNode"])("div",null,[Object(s["createVNode"])(i,{name:"new-import-end-date",uicontrol:"text",modelValue:e.newImportEndDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.newImportEndDate=t}),placeholder:"".concat(e.translate("GoogleAnalyticsImporter_EndDate")," (YYYY-MM-DD)")},null,8,["modelValue","placeholder"])])]),Object(s["createElementVNode"])("div",_,[Object(s["createElementVNode"])("a",{href:"",class:"modal-action modal-close btn",onClick:t[5]||(t[5]=function(t){return e.changeImportEndDateModal()}),style:{"margin-right":"3.5px"}},Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Change")),1),Object(s["createElementVNode"])("a",{href:"",class:"modal-action modal-close modal-no",onClick:t[6]||(t[6]=function(t){return e.cancelEditImportEndDateModal()})},Object(s["toDisplayString"])(e.translate("General_Cancel")),1)])])],512)),[[c,{content:e.tooltipContent,delay:500,duration:200}]])}var x=["data-idsite"],B={class:"sitename"},T=["href"],w={key:1,style:{"text-transform":"uppercase"}},M=Object(s["createElementVNode"])("br",null,null,-1),P=["innerHTML"],U={class:"status"},F={key:0},H=["title"],L=Object(s["createElementVNode"])("br",null,null,-1),R={key:0},q={key:1},z=["title"],Y=Object(s["createElementVNode"])("br",null,null,-1),$={key:0},J={key:2},W=["title"],K={key:3},Q=["title"],X={key:4},Z=Object(s["createElementVNode"])("br",null,null,-1),ee=["innerHTML"],te={key:5},ne=["title"],oe=Object(s["createElementVNode"])("br",null,null,-1),re={class:"last-date-imported"},ae=Object(s["createElementVNode"])("br",null,null,-1),le=Object(s["createElementVNode"])("br",null,null,-1),ie=Object(s["createElementVNode"])("br",null,null,-1),ce=Object(s["createElementVNode"])("br",null,null,-1),se=Object(s["createElementVNode"])("br",null,null,-1),me={key:0},ue={class:"scheduled-reimports"},de={key:0},pe={key:1},be={class:"import-start-finish-times"},ge=Object(s["createElementVNode"])("br",null,null,-1),Oe=Object(s["createElementVNode"])("br",null,null,-1),je={key:0},fe={key:1},ye={key:0},he={key:1},Ce={key:2},Ae={key:3},Ie={class:"actions"},De=["title"],Ne=["title"];function ke(e,t,n,o,r,a){var l;return Object(s["openBlock"])(),Object(s["createElementBlock"])("tr",{"data-idsite":e.status.idSite},[Object(s["createElementVNode"])("td",B,[e.status.site?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:0,target:"_blank",href:e.siteUrl},Object(s["toDisplayString"])(e.siteName),9,T)):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",w,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_SiteDeleted")),1)),M,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_SiteID"))+": "+Object(s["toDisplayString"])(e.status.idSite),1)]),Object(s["createElementVNode"])("td",{class:"ga-info",innerHTML:e.$sanitize(e.gaInfoPretty)},null,8,P),Object(s["createElementVNode"])("td",U,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.status.status)+" ",1),"rate_limited"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",F,[Object(s["createElementVNode"])("span",{class:"icon icon-help",title:e.translate("GoogleAnalyticsImporter_RateLimitHelp")},null,8,H),L,e.status.days_finished_since_rate_limit?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",R,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_FinishedImportingDaysWaiting",e.status.days_finished_since_rate_limit)),1)):Object(s["createCommentVNode"])("",!0)])):Object(s["createCommentVNode"])("",!0),"cloud_rate_limited"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",q,[Object(s["createElementVNode"])("span",{class:"icon icon-help",title:e.status.error},null,8,z),Y,e.status.days_finished_since_rate_limit?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",$,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_FinishedImportingDaysWaiting",e.status.days_finished_since_rate_limit)),1)):Object(s["createCommentVNode"])("",!0)])):Object(s["createCommentVNode"])("",!0),"rate_limited_hourly"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",J,[Object(s["createElementVNode"])("span",{class:"icon icon-help",title:e.translate("GoogleAnalyticsImporter_RateLimitHourlyHelp")},null,8,W)])):Object(s["createCommentVNode"])("",!0),"future_date_import_pending"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",K,[Object(s["createElementVNode"])("span",{class:"icon icon-help",title:e.translate("GoogleAnalyticsImporter_FutureDateHelp",e.status.future_resume_date)},null,8,Q)])):"errored"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",X,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ErrorMessage"))+": "+Object(s["toDisplayString"])(e.status.error||"no message")+" ",1),Z,Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.errorMessageBugReportRequest)},null,8,ee)])):"killed"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",te,[Object(s["createElementVNode"])("span",{class:"icon icon-help",title:e.translate("GoogleAnalyticsImporter_KilledStatusHelp")},null,8,ne),oe,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ErrorMessage"))+": "+Object(s["toDisplayString"])(e.status.error||"no message"),1)])):Object(s["createCommentVNode"])("",!0)]),Object(s["createElementVNode"])("td",re,[Object(s["createElementVNode"])("div",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_LastDayImported"))+": "+Object(s["toDisplayString"])(e.status.last_date_imported||e.noneText),1),ae,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_LastDayArchived"))+": "+Object(s["toDisplayString"])(e.status.last_day_archived||e.noneText),1),le,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ImportStartDate"))+": "+Object(s["toDisplayString"])(e.status.import_range_start||e.websiteCreationTime)+" ",1),ie,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ImportEndDate"))+": "+Object(s["toDisplayString"])(e.status.import_range_end||e.noneText)+" ",1),ce,se]),"finished"!==e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",me,[Object(s["createElementVNode"])("a",{class:"edit-import-end-link table-command-link",href:"",onClick:t[0]||(t[0]=Object(s["withModifiers"])((function(t){return e.$emit("end-import")}),["prevent"]))},Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_EditEndDate")),1)])):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("div",null,[e.status.isGA4?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:0,id:"reimport-date-range",class:"table-command-link",href:"",onClick:t[1]||(t[1]=Object(s["withModifiers"])((function(t){return e.$emit("reimport")}),["prevent"]))},Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ReimportDate")),1)):Object(s["createCommentVNode"])("",!0)])]),Object(s["createElementVNode"])("td",ue,[null!==(l=e.status.reimport_ranges)&&void 0!==l&&l.length?(Object(s["openBlock"])(),Object(s["createElementBlock"])("ul",de,[(Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.status.reimport_ranges,(function(e,t){return Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:t},Object(s["toDisplayString"])(e[0])+","+Object(s["toDisplayString"])(e[1]),1)})),128))])):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",pe,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_None")),1))]),Object(s["createElementVNode"])("td",be,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ImportStartTime"))+": "+Object(s["toDisplayString"])(e.status.import_start_time||e.noneText),1),ge,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_LastResumeTime"))+": "+Object(s["toDisplayString"])(e.status.last_job_start_time||e.noneText),1),Oe,"finished"===e.status.status?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",je,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_TimeFinished"))+": "+Object(s["toDisplayString"])(e.status.import_end_time||e.noneText),1)):e.status.estimated_days_left_to_finish?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",fe,[e.thisJobShouldFinishToday?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",ye,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ThisJobShouldFinishToday")),1)):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",he,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_EstimatedFinishIn",e.status.estimated_days_left_to_finish)),1))])):e.status.import_range_end?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",Ce,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_JobWillRunUntilManuallyCancelled")),1)):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",Ae,Object(s["toDisplayString"])(e.translate("General_Unknown")),1))]),Object(s["createElementVNode"])("td",Ie,[Object(s["createElementVNode"])("a",{class:Object(s["normalizeClass"])(["table-action",{"icon-delete":e.isDone,"icon-close":!e.isDone}]),onClick:t[2]||(t[2]=Object(s["withModifiers"])((function(t){return e.$emit("delete",{isDone:e.isDone})}),["prevent"])),title:e.isDone?e.translate("General_Remove"):e.translate("General_Cancel")},null,10,De),-1===["finished","ongoing","started"].indexOf(e.status.status)?(Object(s["openBlock"])(),Object(s["createElementBlock"])("a",{key:0,class:"table-action icon-play",onClick:t[3]||(t[3]=Object(s["withModifiers"])((function(t){return e.$emit("manuallyResume")}),["prevent"])),title:e.translate("GoogleAnalyticsImporter_ResumeDesc")},null,8,Ne)):Object(s["createCommentVNode"])("",!0)])],8,x)}var Ee=Object(s["defineComponent"])({props:{status:{type:Object,required:!0}},emits:["end-import","reimport","delete","manuallyResume"],computed:{isDone:function(){return"finished"===this.status.status},siteUrl:function(){return"?".concat(a["MatomoUrl"].stringify(Object.assign(Object.assign({period:"day",date:"today"},a["MatomoUrl"].urlParsed.value),{},{idSite:this.status.idSite,module:"CoreHome",action:"index"})))},gaInfoPretty:function(){return(this.status.gaInfoPretty||"").replace(/\n/g,"<br/>")},errorMessageBugReportRequest:function(){return Object(a["translate"])("GoogleAnalyticsImporter_ErrorMessageBugReportRequest",Object(a["externalLink"])("https://forum.matomo.org/"),"</a>")},thisJobShouldFinishToday:function(){return 0===this.status.estimated_days_left_to_finish||"0"===this.status.estimated_days_left_to_finish},siteName:function(){var e;return a["Matomo"].helper.htmlDecode(null===(e=this.status.site)||void 0===e?void 0:e.name)},noneText:function(){return Object(a["translate"])("GoogleAnalyticsImporter_None")},websiteCreationTime:function(){return Object(a["translate"])("GoogleAnalyticsImporter_CreationDate")}}});Ee.render=ke;var Se=Ee,Ge=window,Ve=Ge.$,_e=Object(s["defineComponent"])({props:{statuses:{type:Array,required:!0},stopImportNonce:{type:String,required:!0},changeImportEndDateNonce:{type:String,required:!0},resumeImportNonce:{type:String,required:!0},scheduleReImportNonce:{type:String,required:!0}},components:{Field:C["Field"],ImportStatusRow:Se},directives:{Tooltips:a["Tooltips"]},data:function(){return{editImportEndDateIdSite:null,reimportDateRangeIdSite:null,reimportStartDate:"",reimportEndDate:"",newImportEndDate:"",isGA4:!1}},methods:{showEditImportEndDateModal:function(e,t){this.editImportEndDateIdSite=e,this.isGA4=t,Ve("#editImportEndDate").modal({dismissible:!1}).modal("open")},cancelEditImportEndDateModal:function(){this.editImportEndDateIdSite=null,this.isGA4=!1},manuallyResume:function(e,t){return a["AjaxHelper"].post({module:"GoogleAnalyticsImporter",action:"resumeImport",idSite:e,isGA4:t?1:0,nonce:this.resumeImportNonce},{},{withTokenInUrl:!0}).finally((function(){window.location.reload()}))},deleteImportStatus:function(e,t){var n=this;if(t)return a["AjaxHelper"].post({module:"GoogleAnalyticsImporter",action:"deleteImportStatus",idSite:e,nonce:this.stopImportNonce},{},{withTokenInUrl:!0}).finally((function(){window.location.reload()}));a["Matomo"].helper.modalConfirm("#confirmCancelJob",{yes:function(){n.deleteImportStatus(e,!0)}})},openScheduleReimportModal:function(e,t){this.reimportDateRangeIdSite=e,this.isGA4=t,Ve("#openScheduleReimportModal").modal({dismissible:!1}).modal("open")},changeImportEndDateModal:function(){return a["AjaxHelper"].post({module:"GoogleAnalyticsImporter",action:"changeImportEndDate",idSite:this.editImportEndDateIdSite,nonce:this.changeImportEndDateNonce,endDate:this.newImportEndDate},{},{withTokenInUrl:!0}).finally((function(){window.location.reload()}))},scheduleReimport:function(){return a["AjaxHelper"].post({module:"GoogleAnalyticsImporter",action:"scheduleReImport",idSite:this.reimportDateRangeIdSite,startDate:this.reimportStartDate,endDate:this.reimportEndDate,nonce:this.scheduleReImportNonce,isGA4:this.isGA4?1:0},{},{withTokenInUrl:!0}).finally((function(){window.location.reload()}))}},computed:{tooltipContent:function(){return function(){var e=Ve(this).attr("title")||"";return window.vueSanitize(e.replace(/\n/g,"<br />"))}}}});_e.render=v;var ve=_e,xe={key:0,class:"form-group row"},Be={class:"col s12 m6"},Te=Object(s["createElementVNode"])("br",null,null,-1),we=["innerHTML"],Me={class:"col s12 m6"},Pe=["innerHTML"],Ue=["innerHTML"],Fe=["textContent"],He={class:"form-group row"},Le=["action"],Re={key:0,type:"hidden",name:"isNoDataPage",value:"1"},qe=["value"],ze=["disabled"],Ye=Object(s["createElementVNode"])("span",{class:"icon-upload"},null,-1),$e=Object(s["createElementVNode"])("span",{class:"icon-upload"},null,-1),Je={key:1,class:"system-success connected-message-successful"},We=Object(s["createElementVNode"])("span",{class:"icon-ok"},null,-1),Ke={key:2},Qe=["innerHTML"],Xe=["innerHTML"],Ze=["action"],et=["value"],tt=["disabled","textContent"],nt={key:0,class:"system-success connected-message-successful"},ot=Object(s["createElementVNode"])("span",{class:"icon-ok"},null,-1),rt=["innerHTML"],at=["textContent"],lt=["innerHTML"],it=["innerHTML"],ct=["textContent"];function st(e,t,n,o,r,a){return Object(s["openBlock"])(),Object(s["createElementBlock"])(s["Fragment"],null,[e.isNoDataPage?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",xe,[Object(s["createElementVNode"])("div",Be,[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ConfigureTheImporterLabel1")),1),Object(s["createElementVNode"])("p",null,[Object(s["createTextVNode"])(Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ConfigureTheImporterLabel2")),1),Te,Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.setupGoogleAnalyticsImportFaq)},null,8,we)])]),Object(s["createElementVNode"])("div",Me,[Object(s["createElementVNode"])("div",{class:"form-help",innerHTML:e.$sanitize(e.translate("GoogleAnalyticsImporter_ConfigureTheImporterHelpNewDate","<strong>","</strong>"))},null,8,Pe)])])),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:1,innerHTML:e.$sanitize(e.getAdvanceConnectStep01Text)},null,8,Ue)):Object(s["createCommentVNode"])("",!0),(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(e.isNoDataPage?"li":"div"),null,{default:Object(s["withCtx"])((function(){return[e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",{key:0,textContent:Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep02"))},null,8,Fe)):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("div",He,[Object(s["createElementVNode"])("div",{class:Object(s["normalizeClass"])(e.getClass)},[Object(s["createElementVNode"])("form",{id:"configFileUploadForm",action:e.manualActionUrl,method:"POST",enctype:"multipart/form-data"},[Object(s["createElementVNode"])("input",{type:"file",id:"clientfile",name:"clientfile",accept:".json",onChange:t[0]||(t[0]=function(){return e.processFileChange&&e.processFileChange.apply(e,arguments)}),style:{display:"none"}},null,32),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("input",Re)):Object(s["createCommentVNode"])("",!0),Object(s["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.manualConfigNonce},null,8,qe),Object(s["createElementVNode"])("button",{type:"button",class:"btn advance-upload-button",onClick:t[1]||(t[1]=function(t){return e.selectConfigFile()}),disabled:e.isUploadButtonDisabled},[Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[Ye,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("General_Upload")),1)],512),[[s["vShow"],!e.isUploadButtonDisabled]]),Object(s["withDirectives"])(Object(s["createElementVNode"])("span",null,[$e,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Uploading")),1)],512),[[s["vShow"],e.isUploadButtonDisabled]])],8,ze),e.isNoDataPage&&e.hasClientConfiguration?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",Je,[We,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_UploadSuccessful")),1)])):Object(s["createCommentVNode"])("",!0)],8,Le)],2)])]})),_:1})),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",Ke,[Object(s["createElementVNode"])("span",{innerHTML:e.$sanitize(e.getAdvanceConnectStep03Text)},null,8,Qe),Object(s["createElementVNode"])("div",{class:"complete-note-warning",innerHTML:e.$sanitize(e.getOauthCompleteWarningMessage)},null,8,Xe),Object(s["createElementVNode"])("form",{target:"_blank",method:"post",action:e.authorizeUrl},[Object(s["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.forwardToAuthNonce},null,8,et),Object(s["createElementVNode"])("button",{disabled:!1===e.hasClientConfiguration,textContent:Object(s["toDisplayString"])(e.getAuthorizeText),type:"submit",class:"btn btn-forward-to-Oauth"},null,8,tt),e.isNoDataPage&&e.hasClientConfiguration&&e.isConfigured?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",nt,[ot,Object(s["createTextVNode"])(" "+Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_AccountsConnectedSuccessfully")),1)])):Object(s["createCommentVNode"])("",!0)],8,Ze)])):Object(s["createCommentVNode"])("",!0),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:3,innerHTML:e.$sanitize(e.getAdvanceConnectStep04Text)},null,8,rt)):Object(s["createCommentVNode"])("",!0),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:4,textContent:Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep06GA4"))},null,8,at)):Object(s["createCommentVNode"])("",!0),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:5,innerHTML:e.$sanitize(e.getAdvanceConnectStep07Text)},null,8,lt)):Object(s["createCommentVNode"])("",!0),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:6,innerHTML:e.$sanitize(e.getAdvanceConnectStep08Text)},null,8,it)):Object(s["createCommentVNode"])("",!0),e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createElementBlock"])("li",{key:7,textContent:Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep09"))},null,8,ct)):Object(s["createCommentVNode"])("",!0)],64)}var mt=Object(s["defineComponent"])({data:function(){return{isSelectingFile:!1,isUploading:!1}},props:{manualConfigNonce:{type:String,required:!0},manualActionUrl:{type:String,required:!0},isNoDataPage:Boolean,hasClientConfiguration:Boolean,indexActionUrl:{type:String,required:!0},authorizeUrl:String,forwardToAuthNonce:String,isConfigured:Boolean},methods:{selectConfigFile:function(){this.isSelectingFile=!0;var e=document.getElementById("clientfile");e&&e.click()},processFileChange:function(){var e=document.getElementById("clientfile"),t=document.getElementById("configFileUploadForm");e&&e.value&&t&&(this.isUploading=!0,t.submit())},checkForCancel:function(){if(this.isSelectingFile&&!this.isUploading){var e=document.getElementById("clientfile");e&&!e.value&&(this.isSelectingFile=!1)}}},computed:{setupGoogleAnalyticsImportFaq:function(){return Object(a["translate"])("GoogleAnalyticsImporter_ConfigureTheImporterLabel3",Object(a["externalLink"])("https://matomo.org/faq/general/set-up-google-analytics-import/"),"</a>")},isUploadButtonDisabled:function(){return this.isSelectingFile||this.isUploading},getAdvanceConnectStep01Text:function(){return this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep01",Object(a["externalLink"])("https://matomo.org/faq/general/set-up-google-analytics-import/"),"</a>")},getAdvanceConnectStep03Text:function(){return this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep03",this.translate("GoogleAnalyticsImporter_Authorize"))},getAdvanceConnectStep04Text:function(){return this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep04",'<a href="'.concat(this.indexActionUrl,'" target="_blank" rel="noreferrer noopener">'),"</a>",Object(a["externalLink"])("https://matomo.org/faq/general/running-the-google-analytics-import/"),"</a>")},getAdvanceConnectStep05Text:function(){return this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep05",Object(a["externalLink"])(this.indexActionUrl),"</a>")},getAdvanceConnectStep07Text:function(){return"".concat(this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep07",this.translate("GoogleAnalyticsImporter_Start")),"<br><div >").concat(this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep07Note","<strong>","</strong>",this.translate("GoogleAnalyticsImporter_Start")),"</div>")},getAdvanceConnectStep08Text:function(){return this.translate("GoogleAnalyticsImporter_GAImportNoDataScreenStep08",'<a href="'.concat(this.indexActionUrl,'" target="_blank" rel="noreferrer noopener">'),"</a>")},getOauthCompleteWarningMessage:function(){return this.translate("GoogleAnalyticsImporter_GoogleOauthCompleteWarning","<strong>","</strong>")},getClass:function(){var e="col s12";return this.isNoDataPage?e+=" p-half-point":e+=" m6",e},getAuthorizeText:function(){return this.isConfigured?this.translate("GoogleAnalyticsImporter_ReAuthorize"):this.translate("GoogleAnalyticsImporter_Authorize")}},mounted:function(){document.body.onfocus=this.checkForCancel}});mt.render=st;var ut=mt,dt=["action"],pt=["value"],bt={key:0},gt={type:"submit",class:"btn"},Ot={key:1},jt={type:"submit",class:"btn"},ft=["action"],yt=["value"],ht={type:"submit",class:"btn"};function Ct(e,t,n,o,r,a){var l=Object(s["resolveComponent"])("ContentBlock");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[e.hasClientConfiguration?(Object(s["openBlock"])(),Object(s["createBlock"])(l,{key:0,"content-title":e.translate("GoogleAnalyticsImporter_ConfigureTheImporter")},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("form",{method:"post",action:e.forwardToAuthUrl,id:"clientauthform"},[Object(s["createElementVNode"])("input",{type:"hidden",name:"auth_nonce",value:e.authNonce},null,8,pt),e.isConfigured?(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",bt,[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ImporterIsConfigured")),1),Object(s["createElementVNode"])("button",gt,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ReAuthorize")),1)])):(Object(s["openBlock"])(),Object(s["createElementBlock"])("span",Ot,[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ClientConfigSuccessfullyUpdated")),1),Object(s["createElementVNode"])("button",jt,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_Authorize")),1)]))],8,dt)]})),_:1},8,["content-title"])):Object(s["createCommentVNode"])("",!0),e.hasClientConfiguration?(Object(s["openBlock"])(),Object(s["createBlock"])(l,{key:1,"content-title":e.translate("GoogleAnalyticsImporter_RemoveClientConfiguration")},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("form",{action:e.deleteClientCredentialsLink,method:"POST",enctype:"multipart/form-data",id:"removeConfigForm"},[Object(s["createElementVNode"])("p",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_DeleteUploadedClientConfig"))+":",1),Object(s["createElementVNode"])("input",{type:"hidden",name:"config_nonce",value:e.configNonce},null,8,yt),Object(s["createElementVNode"])("button",ht,Object(s["toDisplayString"])(e.translate("General_Remove")),1)],8,ft)]})),_:1},8,["content-title"])):Object(s["createCommentVNode"])("",!0)])}var At=Object(s["defineComponent"])({props:{hasClientConfiguration:Boolean,isConfigured:Boolean,authNonce:String,configNonce:String},components:{ContentBlock:a["ContentBlock"]},data:function(){return{clientFileToSet:null,clientConfigTextToSet:""}},computed:{forwardToAuthUrl:function(){return"?".concat(a["MatomoUrl"].stringify(Object.assign(Object.assign({},a["MatomoUrl"].urlParsed.value),{},{action:"forwardToAuth"})))},configureClientLink:function(){return"?".concat(a["MatomoUrl"].stringify(Object.assign(Object.assign({},a["MatomoUrl"].urlParsed.value),{},{action:"configureClient"})))},configureClientDesc2:function(){var e="https://matomo.org/docs/google-analytics-importer/";return Object(a["translate"])("GoogleAnalyticsImporter_ConfigureClientDesc2",'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer">'),"</a>")},deleteClientCredentialsLink:function(){return"?".concat(a["MatomoUrl"].stringify(Object.assign(Object.assign({},a["MatomoUrl"].urlParsed.value),{},{action:"deleteClientCredentials"})))}}});At.render=Ct;var It=At,Dt={class:"hide-import-main-div ga-import-main-div ga4-main-div"},Nt={key:0},kt={key:3,class:"ui-confirm",id:"confirmCancelJob"},Et=["value"],St=["value"];function Gt(e,t,n,o,r,a){var l=Object(s["resolveComponent"])("CommonConnect"),i=Object(s["resolveComponent"])("ClientConfig"),c=Object(s["resolveComponent"])("ImportSchedulerGA4"),m=Object(s["resolveComponent"])("ContentBlock"),u=Object(s["resolveComponent"])("ImportStatus");return Object(s["openBlock"])(),Object(s["createElementBlock"])("div",null,[Object(s["createVNode"])(l,{extensions:e.extensions,"configure-connection-props":e.configureConnectionProps},null,8,["extensions","configure-connection-props"]),e.isClientConfigurable?(Object(s["openBlock"])(),Object(s["createBlock"])(i,{key:0,"has-client-configuration":e.hasClientConfiguration,"is-configured":e.isConfigured,"auth-nonce":e.authNonce,"config-nonce":e.configNonce},null,8,["has-client-configuration","is-configured","auth-nonce","config-nonce"])):Object(s["createCommentVNode"])("",!0),e.hasClientConfiguration&&e.isConfigured?(Object(s["openBlock"])(),Object(s["createBlock"])(m,{key:1},{default:Object(s["withCtx"])((function(){return[Object(s["createElementVNode"])("div",Dt,[Object(s["createElementVNode"])("h2",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ScheduleAnImportGA4")),1),Object(s["createVNode"])(c,{"start-import-nonce":e.startImportNonce,"max-end-date-desc":e.maxEndDateDesc,"extra-custom-dimensions-field":e.extraCustomDimensionsFieldGa4,"stream-ids-field":e.streamIdsFieldGa4},null,8,["start-import-nonce","max-end-date-desc","extra-custom-dimensions-field","stream-ids-field"])])]})),_:1})):Object(s["createCommentVNode"])("",!0),e.hasClientConfiguration&&e.isConfigured?(Object(s["openBlock"])(),Object(s["createBlock"])(m,{key:2,id:"importStatusContainer","content-title":e.translate("GoogleAnalyticsImporter_ImportJobs")},{default:Object(s["withCtx"])((function(){var t,n;return[null!==(t=e.statuses)&&void 0!==t&&t.length?Object(s["createCommentVNode"])("",!0):(Object(s["openBlock"])(),Object(s["createElementBlock"])("p",Nt,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_ThereAreNoImportJobs")),1)),null!==(n=e.statuses)&&void 0!==n&&n.length?(Object(s["openBlock"])(),Object(s["createBlock"])(u,{key:1,statuses:e.statuses,"stop-import-nonce":e.stopImportNonce,"change-import-end-date-nonce":e.changeImportEndDateNonce,"resume-import-nonce":e.resumeImportNonce,"schedule-re-import-nonce":e.scheduleReImportNonce},null,8,["statuses","stop-import-nonce","change-import-end-date-nonce","resume-import-nonce","schedule-re-import-nonce"])):Object(s["createCommentVNode"])("",!0)]})),_:1},8,["content-title"])):Object(s["createCommentVNode"])("",!0),e.hasClientConfiguration&&e.isConfigured?(Object(s["openBlock"])(),Object(s["createElementBlock"])("div",kt,[Object(s["createElementVNode"])("h2",null,Object(s["toDisplayString"])(e.translate("GoogleAnalyticsImporter_CancelJobConfirm")),1),Object(s["createElementVNode"])("input",{role:"yes",type:"button",value:e.translate("General_Yes")},null,8,Et),Object(s["createElementVNode"])("input",{role:"no",type:"button",value:e.translate("General_No")},null,8,St)])):Object(s["createCommentVNode"])("",!0)])}function Vt(e,t,n,o,r,a){var l=Object(s["resolveComponent"])("ContentBlock");return Object(s["openBlock"])(!0),Object(s["createElementBlock"])(s["Fragment"],null,Object(s["renderList"])(e.componentExtensions,(function(t,n){return Object(s["openBlock"])(),Object(s["createElementBlock"])(s["Fragment"],{key:n},[e.isNoDataPage?(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(t),{key:1,"manual-config-nonce":e.configConnectProps.manualConfigNonce,"base-domain":e.configConnectProps.baseDomain,"base-url":e.configConnectProps.baseUrl,"manual-action-url":e.configConnectProps.manualActionUrl,"primary-text":e.configConnectProps.primaryText,"radio-options":e.configConnectProps.radioOptions,"manual-config-text":e.configConnectProps.manualConfigText,"connect-accounts-url":e.configConnectProps.connectAccountsUrl,"connect-accounts-btn-text":e.configConnectProps.connectAccountsBtnText,"auth-url":e.configConnectProps.authUrl,"unlink-url":e.configConnectProps.unlinkUrl,strategy:e.configConnectProps.strategy,"connected-with":e.configConnectProps.connectedWith,"is-no-data-page":e.isNoDataPage,"has-client-configuration":e.hasClientConfiguration,"index-action-url":e.indexActionUrl,"authorize-url":e.authorizeUrl,"forward-to-auth-nonce":e.forwardToAuthNonce,"is-configured":e.isConfigured,"strategy-to-use":e.strategyToUse,"additional-help-text":e.configConnectProps.additionalHelpText},null,8,["manual-config-nonce","base-domain","base-url","manual-action-url","primary-text","radio-options","manual-config-text","connect-accounts-url","connect-accounts-btn-text","auth-url","unlink-url","strategy","connected-with","is-no-data-page","has-client-configuration","index-action-url","authorize-url","forward-to-auth-nonce","is-configured","strategy-to-use","additional-help-text"])):(Object(s["openBlock"])(),Object(s["createBlock"])(l,{key:0,"content-title":e.isNoDataPage?"":e.translate("GoogleAnalyticsImporter_AdminMenuTitle")},{default:Object(s["withCtx"])((function(){return[(Object(s["openBlock"])(),Object(s["createBlock"])(Object(s["resolveDynamicComponent"])(t),{"manual-config-nonce":e.configConnectProps.manualConfigNonce,"base-domain":e.configConnectProps.baseDomain,"base-url":e.configConnectProps.baseUrl,"manual-action-url":e.configConnectProps.manualActionUrl,"primary-text":e.configConnectProps.primaryText,"radio-options":e.configConnectProps.radioOptions,"manual-config-text":e.configConnectProps.manualConfigText,"connect-accounts-url":e.configConnectProps.connectAccountsUrl,"connect-accounts-btn-text":e.configConnectProps.connectAccountsBtnText,"auth-url":e.configConnectProps.authUrl,"unlink-url":e.configConnectProps.unlinkUrl,strategy:e.configConnectProps.strategy,"connected-with":e.configConnectProps.connectedWith,"is-no-data-page":e.isNoDataPage,"has-client-configuration":e.hasClientConfiguration,"index-action-url":e.indexActionUrl,"authorize-url":e.authorizeUrl,"forward-to-auth-nonce":e.forwardToAuthNonce,"is-configured":e.isConfigured,"strategy-to-use":e.strategyToUse,"additional-help-text":e.configConnectProps.additionalHelpText},null,8,["manual-config-nonce","base-domain","base-url","manual-action-url","primary-text","radio-options","manual-config-text","connect-accounts-url","connect-accounts-btn-text","auth-url","unlink-url","strategy","connected-with","is-no-data-page","has-client-configuration","index-action-url","authorize-url","forward-to-auth-nonce","is-configured","strategy-to-use","additional-help-text"]))]})),_:2},1032,["content-title"]))],64)})),128)}var _t=Object(s["defineComponent"])({props:{extensions:Array,configureConnectionProps:{type:Object,required:!0},isNoDataPage:Boolean,hasClientConfiguration:Boolean,indexActionUrl:String,authorizeUrl:String,forwardToAuthNonce:String,strategyToUse:String,isConfigured:Boolean},components:{Notification:a["Notification"],ContentBlock:a["ContentBlock"]},computed:{componentExtensions:function(){var e=this.extensions;return Object(s["markRaw"])(e.map((function(e){return Object(a["useExternalPluginComponent"])(e.plugin,e.component)})))},configConnectProps:function(){return this.configureConnectionProps}}});_t.render=Vt;var vt=_t,xt=Object(s["defineComponent"])({props:{hasClientConfiguration:Boolean,isConfigured:Boolean,isClientConfigurable:Boolean,authNonce:String,configNonce:String,startImportNonce:{type:String,required:!0},maxEndDateDesc:String,extraCustomDimensionsField:{type:Object,required:!0},extraCustomDimensionsFieldGa4:{type:Object,required:!0},streamIdsFieldGa4:{type:Object,required:!0},statuses:{type:Array,required:!0},stopImportNonce:{type:String,required:!0},changeImportEndDateNonce:{type:String,required:!0},resumeImportNonce:{type:String,required:!0},scheduleReImportNonce:{type:String,required:!0},importOptionsUa:{type:Object,required:!0},importOptionsGa4:{type:Object,required:!0},extensions:Array,configureConnectionProps:{type:Object,required:!0}},components:{CommonConnect:vt,ImportSchedulerGA4:I,ContentBlock:a["ContentBlock"],ClientConfig:It,ImportStatus:ve},data:function(){return{selectedImporter:""}},computed:{importerHelp2Text:function(){var e="https://matomo.org/docs/google-analytics-importer/";return Object(a["translate"])("GoogleAnalyticsImporter_ImporterHelp2",'<a href="'.concat(e,'" target="_blank" rel="noreferrer noopener">'),"</a>")},importerHelp3Text:function(){return Object(a["translate"])("GoogleAnalyticsImporter_ImporterHelp3","<br><br><strong>","</strong>")},componentExtensions:function(){var e=this.extensions;return Object(s["markRaw"])(e.map((function(e){return Object(a["useExternalPluginComponent"])(e.plugin,e.component)})))},configConnectProps:function(){return this.configureConnectionProps}}});xt.render=Gt;var Bt=xt;
/*!
 * Matomo - free/libre analytics platform
 *
 * @link https://matomo.org
 * @license http://www.gnu.org/licenses/gpl-3.0.html GPL v3 or later
 */}})}));
//# sourceMappingURL=GoogleAnalyticsImporter.umd.min.js.map